<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ELMA-Suite ¬∑ Herramientas acad√©micas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root {
      --azul-fondo-1: #d6eaff;
      --azul-fondo-2: #b3d5ff;
      --azul-texto: #003366;
      --azul-boton: #0d6efd;
      --azul-boton-hover: #0b63c5;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, var(--azul-fondo-1), var(--azul-fondo-2));
    }
    .card {
      background: #ffffff;
      padding: 24px 32px;
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      max-width: 520px;
      width: 100%;
      text-align: center;
    }
    h1 {
      margin: 0 0 8px;
      font-size: 1.9rem;
      color: var(--azul-texto);
    }
    p {
      margin: 0 0 18px;
      color: #34495e;
    }
    .buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
    }
    a.btn {
      display: block;
      padding: 10px 16px;
      border-radius: 999px;
      text-decoration: none;
      font-weight: 600;
      border: 1px solid var(--azul-boton-hover);
      background: var(--azul-boton);
      color: #ffffff;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.1s ease, color 0.1s ease;
    }
    a.btn.secondary {
      background: #ffffff;
      color: var(--azul-boton);
    }
    a.btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      background: var(--azul-boton-hover);
      color: #ffffff;
    }
    a.btn.secondary:hover {
      background: #e6f0ff;
      color: var(--azul-boton-hover);
    }
    small {
      display: block;
      margin-top: 16px;
      font-size: 0.8rem;
      color: #667;
    }
    .menu-extra {
      margin-top: 12px;
      display: flex;
      justify-content: center;
      gap: 16px;
    }
    .menu-link-btn {
      border: none;
      background: none;
      color: var(--azul-boton);
      text-decoration: underline;
      cursor: pointer;
      font-size: 0.85rem;
      padding: 0;
    }
  </style>
</head>
<body>

  <!-- LOGIN -->
  <div class="card" id="login-card">
    <h1>ELMA-Suite</h1>
    <p>Acceso docente ¬∑ Ingrese su c√≥digo y contrase√±a.</p>

    <form id="login-form">
      <div>
        <label for="user-code">C√≥digo de usuario</label>
        <input id="user-code" type="text" autocomplete="off" required placeholder="Ej: S-AGUILI2026">
      </div>
      <div>
        <label for="user-pass">Contrase√±a</label>
        <input id="user-pass" type="password" autocomplete="off" required>
      </div>
      <button type="submit" class="btn">Entrar</button>
      <div class="login-error" id="login-error"></div>
    </form>
  </div>

  <!-- MEN√ö PRINCIPAL -->
  <div class="card" id="menu-card" style="display:none;">
    <h1>ELMA-Suite</h1>
    <p id="menu-subtitle">Herramientas acad√©micas para planeamientos y r√∫bricas.</p>

  <div class="buttons">
    <a class="btn" href="generador_planeamientos_v1_0/index.html">Generador de Planeamientos</a>
    <a class="btn secondary" href="Rubricas_ELMA_Secundaria_v1_1_2/index.html">Generador de R√∫bricas</a>

    <!-- üî• NUEVO M√ìDULO DE PROYECTOS -->
    <a class="btn" href="ICPI/icpi.html">M√≥dulo de Proyectos</a>
  </div>

    <div class="menu-extra">
      <button type="button" id="btn-open-change-menu" class="menu-link-btn">Cambiar contrase√±a</button>
      <button type="button" id="btn-logout" class="menu-link-btn">Cerrar sesi√≥n</button>
    </div>
    <div class="menu-extra" id="admin-panel-button" style="display:none; margin-top:8px;">
      <button type="button" class="menu-link-btn" id="btn-open-admin">Administraci√≥n de Usuarios</button>
    </div>

    <div id="change-pass-panel-menu" style="display:none; margin-top:14px; text-align:left;">
      <form id="change-pass-form-menu">
        <label>Contrase√±a actual</label>
        <input id="current-pass-menu" type="password" autocomplete="off" required>
        <label style="margin-top:6px;">Nueva contrase√±a</label>
        <input id="new-pass-menu" type="password" autocomplete="off" required>
        <label style="margin-top:6px;">Confirmar nueva contrase√±a</label>
        <input id="new-pass2-menu" type="password" autocomplete="off" required>
        <button type="submit" class="btn" style="margin-top:10px;">Guardar nueva contrase√±a</button>
        <div class="login-error" id="change-pass-error-menu"></div>
      </form>
    </div>

    <small>ELMA-Suite v1.0 Institucional ¬∑ Escuela Liceo Mar√≠a Auxiliadora ¬∑ Uso interno docente</small>
  </div>

<script src="admin.js"></script>

<script>
document.getElementById("btn-open-admin").onclick = openAdmin;
</script>

<script>
/* ============================================================
   üîê SISTEMA DE USUARIOS ‚Äî LISTA COMPLETA
   ============================================================ */

const ELMA_USERS = [
  { code: "P-AGUERL2026", name: "Ag√ºero Morales, Luc√≠a De Los √Ångeles" },
  { code: "P-AGUIRR2026", name: "Aguirre Romero Melissa" },
  { code: "P-BALTOD2026", name: "Baltodano Anchia, Diana, Cristina" },
  { code: "P-BARRAG2026", name: "Barrantes Gonz√°lez Maylin Alejandra" },
  { code: "P-BARRIM2026", name: "Barrios Mendoza Lorella" },
  { code: "P-BERMUC2026", name: "Berm√∫dez Cordero Shirley Vivian" },
  { code: "P-CABEZD2026", name: "Cabezas Dinarte Anell" },
  { code: "P-CARVAA2026", name: "Carvajal Vega, Adriana" },
  { code: "P-CAZARA2026", name: "C√°zares Alpizar Yesenia" },
  { code: "P-CASTRK2026", name: "Castro Alfaro, Karla" },
  { code: "P-CONXXE2026", name: "Con Pacheco, Eugenia Mar√≠a" },
  { code: "P-CRUZXK2026", name: "Cruz Soza, Sor Kassandra" },
  { code: "P-FALLAC2026", name: "Fallas Rodr√≠guez, Carmen Maria" },
  { code: "P-FONSEM2026", name: "Fonseca Garcia, Mar√≠a Gabriela" },
  { code: "P-GARBAG2026", name: "Garbanzo Garita. Roc√≠o Lorena" },
  { code: "P-GARCIG2026", name: "Garcia Garc√≠a Maria De Los √Ångeles" },
  { code: "P-GONZAP2026", name: "Gonz√°lez Barboza, Paula" },
  { code: "P-HERRET2026", name: "Herrera, Tencio, Maria, Gabriela" },
  { code: "P-HIDALJ2026", name: "Hidalgo Pochet, Julie" },
  { code: "P-JIMENM2026", name: "Jim√©nez Madrigal, Mauricio" },
  { code: "P-LEDEZK2026", name: "Ledezma Rojas, Karla, Fiorella" },
  { code: "P-MATAMC2026", name: "Matamoros Calvo Cristina Maria" },
  { code: "P-MELENS2026", name: "Mel√©ndez Serrano Maureen. Paola" },
  { code: "P-MENAXM2026", name: "Mena Murillo Guiselle" },
  { code: "P-MENAXE2026", name: "Mena Z√∫√±iga, Eva Alaria" },
  { code: "P-MENDEH2026", name: "M√©ndez, Barrantes, Helen" },
  { code: "P-MENEVM2026", name: "Meneses Valverde, Mainor" },
  { code: "P-MONJEA2026", name: "Monje Ram√≠rez, Andr√© Maria" },
  { code: "P-MONTEA2026", name: "Montero Villalobos Adriana" },
  { code: "P-MORAAA2026", name: "Mora Araya. Ana Bel√©n" },
  { code: "P-MURILC2026", name: "Murillo Chinchilla. Adriana" },
  { code: "P-OBANDM2026", name: "Obando Arias Mar√≠a Jos√©" },
  { code: "P-SANCHP2026", name: "S√°nchez Azofeifa Pamela" },
  { code: "P-PUTOYM2026", name: "Putoy Rodr√≠guez, Sor, Martha" },
  { code: "P-RIVERA2026", name: "Rivera Porras, Adriana" },
  { code: "P-ROJASM2026", name: "Rojas Morelli Guiselle" },
  { code: "P-SOLANA2026", name: "Solano Calder√≥n, Ana Laura" },
  { code: "P-SOLISM2026", name: "Sol√≠s Barquero Marcela Jenny" },
  { code: "P-VARGAC2026", name: "Vargas Carpio. Karol Maria" },
  { code: "P-VARGAL2026", name: "Vargas Hern√°ndez Liseth" },
  { code: "P-VICTOF2026", name: "Victor Fuentes, Kendy" },
  { code: "P-VILLAD2026", name: "Villalobos Jim√©nez, Douglas Javier" },
  { code: "P-ZUNIGN2026", name: "Z√∫√±iga Segura Natalia" },
  { code: "P-PADILM2026", name: "Padilla Hern√°ndez, Mar√≠a Isel" },
  { code: "P-AGUILM2026", name: "Aguilar Garc√≠a Mirna" },
  { code: "P-SERRAG2026", name: "Serrano Garc√≠a Tatiana" },
  { code: "P-MENDEA2026", name: "M√©ndez Arce, Laura Vanessa" },
  { code: "P-MENDEF2026", name: "M√©ndez Garro Fabiola" },

  { code: "S-AGUILI2026", name: "Aguilar Iliana" },
  { code: "S-ALVARK2026", name: "Alvarado Keilyn" },
  { code: "S-ANCHIC2026", name: "Anch√≠a Carolina" },
  { code: "S-ANDERC2026", name: "Anderson Carlos" },
  { code: "S-ARIASL2026", name: "Arias Laura" },
  { code: "S-AVILAN2026", name: "√Åvila Natalia" },
  { code: "S-BERMUY2026", name: "Berm√∫dez Yehisy" },
  { code: "S-CABEZA2026", name: "Cabezas Annell" },
  { code: "S-CALVOS2026", name: "Calvo Susan" },
  { code: "S-CASTIK2026", name: "Castillo Katherine" },
  { code: "S-DELGAM2026", name: "Delgado Marlen" },
  { code: "S-ESPINS2026", name: "Espinoza Sor Nazareth" },
  { code: "S-FONSEA2026", name: "Fonseca Alexander" },
  { code: "S-HENRIC2026", name: "Henr√≠quez Cristina" },
  { code: "S-HERNAC2026", name: "Hern√°ndez Carmen" },
  { code: "S-MARINM2026", name: "Mar√≠n Mariela" },
  { code: "S-MARTIE2026", name: "Mart√≠nez Eduardo" },
  { code: "S-MCADAA2026", name: "McAdam Aldo" },
  { code: "S-MENESM2026", name: "Meneses Minor" },
  { code: "S-NAVARL2026", name: "Navarro Leidy" },
  { code: "S-NUNEZM2026", name: "N√∫√±ez Maricela" },
  { code: "S-PIEDRD2026", name: "Piedra Daniela" },
  { code: "S-PORRAS2026", name: "Porras Silvia" },
  { code: "S-PRADOM2026", name: "Prado Mar√≠a Fernanda" },
  { code: "S-ROMERL2026", name: "Romero Luis" },
  { code: "S-SALASV2026", name: "Salas Valeria" },
  { code: "S-SEQUEA2026", name: "Sequeira Allan" },
  { code: "S-ULATEM2026", name: "Ulate Mabel" },
  { code: "S-ULATES2026", name: "Ulate Sor Victoria" },
  { code: "S-VENEGK2026", name: "Venegas Karla" },
  { code: "S-ZUNIGP2026", name: "Z√∫√±iga Paola" },

  { code: "S-ADMIN2026", name: "Administrador ELMA-Suite" },
];

/* Clave maestra SNIT para recuperaci√≥n del administrador */
const ELMA_SNIT_KEY = "k9R!t6$X2mQp";

/* Usuario administrador con privilegios */
const ADMIN_CODE = "S-ADMIN2026";

/* Clave de primer acceso global (solo la primera vez) */
const INITIAL_ACCESS_KEY = "ELMA-2026-ADMIN";

/* ============================================================
   üßÇ SALT + HASH + STORAGE
   ============================================================ */

function elma_generateSalt() {
  return crypto.randomUUID();
}

async function elma_hash(text) {
  const uint8 = new TextEncoder().encode(text);
  const digest = await crypto.subtle.digest("SHA-256", uint8);
  return Array.from(new Uint8Array(digest))
    .map(b => b.toString(16).padStart(2, "0"))
    .join("");
}

function elma_storeHash(code, hash, salt) {
  localStorage.setItem("elmaPass-" + code, JSON.stringify({ hash, salt }));
}

function elma_getStoredHash(code) {
  const raw = localStorage.getItem("elmaPass-" + code);
  if (!raw) return null;
  try { return JSON.parse(raw); } catch { return null; }
}

/* ============================================================
   üîç FUNCIONES UTILITARIAS
   ============================================================ */

let currentUser = null;

/* ======================= ENCONTRAR USUARIO ======================= */
function findUserByCode(code) {
  return ELMA_USERS.find(
    u => u.code.toUpperCase() === (code || "").toUpperCase()
  ) || null;
}

const loginCard   = document.getElementById("login-card");
const menuCard    = document.getElementById("menu-card");
const menuSubtitle = document.getElementById("menu-subtitle");

function showMenu(user) {
  loginCard.style.display = "none";
  menuCard.style.display  = "block";
  currentUser = user;
  menuSubtitle.textContent =
    `Bienvenido(a), ${user.name}. Herramientas acad√©micas para planeamientos y r√∫bricas.`;
  if (user.code === "S-ADMIN2026") {
    document.getElementById("admin-panel-button").style.display = "block";
}

  // Bot√≥n extra de admin
  if (user.code === ADMIN_CODE && !document.getElementById("elma-admin-recovery")) {
    const cont = document.createElement("div");
    cont.style.marginTop = "18px";
    cont.innerHTML = `
      <button class="btn" id="elma-admin-recovery"
        style="background:#146c43;border-color:#146c43;">
        Administraci√≥n de contrase√±as
      </button>
    `;
    menuCard.appendChild(cont);
    document.getElementById("elma-admin-recovery").onclick = () => {
      elma_showAdminRecovery();
    };
  }
}

function showLogin() {
  currentUser = null;
  menuCard.style.display  = "none";
  loginCard.style.display = "block";
  loginError.textContent  = "";
  codeInput.value = "";
  passInput.value = "";
}

/* ============================================================
   üí† LOGIN
   ============================================================ */

const formLogin  = document.getElementById("login-form");
const codeInput  = document.getElementById("user-code");
const passInput  = document.getElementById("user-pass");
const loginError = document.getElementById("login-error");

formLogin.addEventListener("submit", async ev => {
  ev.preventDefault();
  loginError.textContent = "";

  const code = codeInput.value.trim();
  const pass = passInput.value.trim();

  const user = findUserByCode(code);
  if (!user) {
    loginError.textContent = "C√≥digo de usuario no reconocido.";
    return;
  }

  // 1Ô∏è‚É£ Si ya tiene contrase√±a individual ‚Üí validar con hash
  const stored = elma_getStoredHash(user.code);
  if (stored) {
    const h = await elma_hash(stored.salt + pass);
    if (h !== stored.hash) {
      loginError.textContent = "Contrase√±a incorrecta.";
      return;
    }
    localStorage.setItem("elmaUser", user.code);
    showMenu(user);
    return;
  }

  // 2Ô∏è‚É£ Primer acceso ‚Üí requiere clave global INITIAL_ACCESS_KEY
  if (pass !== INITIAL_ACCESS_KEY) {
    loginError.textContent = "Contrase√±a incorrecta (primer acceso).";
    return;
  }

  // 3Ô∏è‚É£ Primer acceso v√°lido ‚Üí generar contrase√±a autom√°tica
  await elma_showAutoPassword(user);
  localStorage.setItem("elmaUser", user.code);
  showMenu(user);
});

/* restaurar sesi√≥n previa si existe */
(function restoreLogin() {
  const last = localStorage.getItem("elmaUser");
  if (!last) return;
  const u = findUserByCode(last);
  if (u) showMenu(u);
})();

/* ============================================================
   üîí GENERAR CONTRASE√ëA AUTOM√ÅTICA + POPUP + "PDF"
   ============================================================ */

function elma_generatePassword() {
  const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789@$%&*?";
  let res = "";
  for (let i = 0; i < 10; i++) {
    res += chars[Math.floor(Math.random() * chars.length)];
  }
  return res;
}

function elma_createPopup(html) {
  const wrap = document.createElement("div");
  wrap.style.position = "fixed";
  wrap.style.top = 0;
  wrap.style.left = 0;
  wrap.style.width = "100%";
  wrap.style.height = "100%";
  wrap.style.background = "rgba(0,0,0,.55)";
  wrap.style.display = "flex";
  wrap.style.alignItems = "center";
  wrap.style.justifyContent = "center";
  wrap.style.zIndex = 9999;

  wrap.innerHTML = `
    <div style="background:white;padding:24px 28px;border-radius:16px;max-width:410px;text-align:center;">
      ${html}
      <button style="margin-top:18px;padding:10px 18px;font-weight:600;border-radius:10px;border:none;background:#0d6efd;color:white;cursor:pointer;" id="elmaOKbtn">Aceptar</button>
    </div>
  `;
  document.body.appendChild(wrap);
  document.getElementById("elmaOKbtn").onclick = () => wrap.remove();
}

function elma_downloadPDF(user, password) {
  const win = window.open("", "_blank");
  win.document.write(`
    <h2>Credenciales ELMA-Suite</h2>
    <p><b>Docente:</b> ${user.name}</p>
    <p><b>C√≥digo de usuario:</b> ${user.code}</p>
    <p><b>Contrase√±a generada:</b> ${password}</p>
    <p>Se recomienda cambiar esta contrase√±a desde el men√∫ principal del sistema.</p>
  `);
  win.print();
  win.close();
}

async function elma_showAutoPassword(user) {
  const password = elma_generatePassword();
  const salt = elma_generateSalt();
  const hash = await elma_hash(salt + password);
  elma_storeHash(user.code, hash, salt);

  elma_createPopup(`
    <h3>Contrase√±a generada</h3>
    <p>Bienvenido(a) ${user.name}.</p>
    <p>Su contrase√±a para ELMA-Suite es:</p>
    <p style="font-size:1.35rem;font-weight:700;color:#003366;">${password}</p>
    <p>‚ö† Gu√°rdela en un lugar seguro.</p>
    <button id="elmaPDFbtn" style="margin-top:12px;padding:8px 14px;border:1px solid #003366;background:white;color:#003366;font-weight:600;border-radius:8px;cursor:pointer;">
      Descargar PDF
    </button>
  `);

  document.getElementById("elmaPDFbtn").onclick = () => {
    elma_downloadPDF(user, password);
  };
}

/* ============================================================
   üîÑ CAMBIO DE CONTRASE√ëA EN EL MEN√ö
   ============================================================ */

const changeMenuBtn   = document.getElementById('btn-open-change-menu');
const changePanelMenu = document.getElementById('change-pass-panel-menu');
const changeFormMenu  = document.getElementById('change-pass-form-menu');
const currentPassMenu = document.getElementById('current-pass-menu');
const newPassMenu     = document.getElementById('new-pass-menu');
const newPass2Menu    = document.getElementById('new-pass2-menu');
const changeErrorMenu = document.getElementById('change-pass-error-menu');

changeMenuBtn.onclick = () => {
  changePanelMenu.style.display =
    changePanelMenu.style.display === "block" ? "none" : "block";
  changeErrorMenu.textContent = "";
};

changeFormMenu.addEventListener("submit", async ev => {
  ev.preventDefault();
  changeErrorMenu.textContent = "";
  if (!currentUser) return;

  const stored = elma_getStoredHash(currentUser.code);
  const c   = currentPassMenu.value;
  const np1 = newPassMenu.value;
  const np2 = newPass2Menu.value;

  if (np1 !== np2) {
    changeErrorMenu.textContent = "Las contrase√±as nuevas no coinciden.";
    return;
  }
  const h = await elma_hash(stored.salt + c);
  if (h !== stored.hash) {
    changeErrorMenu.textContent = "Contrase√±a actual incorrecta.";
    return;
  }

  const salt = elma_generateSalt();
  const hash = await elma_hash(salt + np1);
  elma_storeHash(currentUser.code, hash, salt);
  changeErrorMenu.style.color = "#168821";
  changeErrorMenu.textContent = "Contrase√±a actualizada.";
});

/* ============================================================
   üö™ CERRAR SESI√ìN
   ============================================================ */

const logoutBtn = document.getElementById('btn-logout');
logoutBtn.onclick = () => {
  localStorage.removeItem("elmaUser");
  showLogin();
};

/* ============================================================
   üîì PANEL DE RECUPERACI√ìN PARA ADMINISTRADOR (SNIT)
   ============================================================ */

function elma_showAdminRecovery() {
  const list = ELMA_USERS
    .map(u => `<option value="${u.code}">${u.name} (${u.code})</option>`)
    .join("");

  elma_createPopup(`
    <h3>Recuperaci√≥n de contrase√±as</h3>
    <p>Seleccione un usuario para regenerar su contrase√±a:</p>

    <select id="elma-admin-target"
      style="margin-top:8px;padding:6px;border-radius:6px;width:94%;">
      ${list}
    </select>

    <button id="elma-admin-gen"
      style="margin-top:14px;padding:10px 14px;border:none;border-radius:8px;background:#146c43;color:white;font-weight:600;">
      Generar nueva contrase√±a
    </button>

    <div id="elma-admin-result"
      style="margin-top:12px;font-weight:600;color:#003366;"></div>
  `);

  document.getElementById("elma-admin-gen").onclick = async () => {
    const code = document.getElementById("elma-admin-target").value;
    const user = findUserByCode(code);
    if (!user) return;

    const pass = elma_generatePassword();
    const salt = elma_generateSalt();
    const hash = await elma_hash(salt + pass);
    elma_storeHash(code, hash, salt);

    document.getElementById("elma-admin-result").innerHTML =
      `Nueva contrase√±a: <span style="font-size:1.25rem;color:#0d2c56;">${pass}</span>`;
  };
}

/* ============================================================
   ‚å® ACTIVADOR DE ADMINISTRADOR POR SNIT
   ============================================================ */

document.addEventListener("keydown", ev => {
  if (ev.key !== "Enter") return;
  if (passInput.value !== ELMA_SNIT_KEY) return;
  ev.preventDefault();

  const code = codeInput.value.trim();
  if (code === ADMIN_CODE) {
    elma_showAdminRecovery();
  }
});

</script>
<!-- ================================
     PANEL ADMINISTRATIVO COMPLETO
     ================================ -->

<div id="adminPanel" style="
    display:none;
    position:fixed; 
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.60);
    z-index:9999;
">
   <div style="
       width:80%; 
       max-width:900px; 
       margin:40px auto;
       background:#fff;
       padding:20px;
       border-radius:10px;
       box-shadow:0 0 25px rgba(0,0,0,0.4);
       overflow-y:auto;
       max-height:90%;
    ">

     <h2 style="text-align:center; margin-bottom:10px;">Administraci√≥n de Usuarios ELMA-Suite</h2>

     <div style="text-align:right; margin-bottom:12px;">
        <button onclick="closeAdmin()" style="
            background:#d9534f; 
            padding:6px 10px; 
            color:white; 
            border:none;
            border-radius:6px;
        ">Cerrar</button>
     </div>

     <!-- BUSCADOR -->
     <input 
       id="adminSearch" 
       type="text" 
       placeholder="Buscar por nombre o c√≥digo..."
       oninput="filterAdminUsers()"
       style="
           width:100%;
           padding:10px;
           margin-bottom:15px;
           border-radius:6px;
           border:1px solid #888;
       "
     >

     <!-- TABLA -->
     <table style="width:100%; border-collapse:collapse;">
       <thead>
         <tr style="background:#22577A; color:white;">
           <th style="padding:8px;">C√≥digo</th>
           <th>Nombre</th>
           <th>Nivel</th>
           <th style="width:140px;">Acciones</th>
         </tr>
       </thead>
       <tbody id="adminUsersTable"></tbody>
     </table>

     <!-- BOT√ìN AGREGAR -->
     <div style="margin-top:20px; text-align:center;">
        <button onclick="openAddAdminUser()" style="
           background:#38A3A5;
           padding:10px 20px;
           color:white;
           font-weight:bold;
           border:none;
           border-radius:6px;
        ">+ Nuevo Usuario</button>
     </div>

     <!-- BOT√ìN EXPORTAR -->
     <div style="margin-top:20px; text-align:center;">
        <button onclick="exportUsersJSON()" style="
           background:#22577A;
           padding:10px 20px;
           color:white;
           border:none;
           border-radius:6px;
        ">Descargar respaldo (users.json)</button>
     </div>

   </div>
</div>
<!-- MODAL ADMIN -->
<div id="adminModal" style="
   display:none; position:fixed; top:0; left:0;
   width:100%; height:100%; background:rgba(0,0,0,0.5);
   z-index:10000;
">
  <div style="
     width:400px; margin:10% auto; background:#fff; padding:20px;
     border-radius:10px; box-shadow:0 0 15px rgba(0,0,0,0.4);
   ">
     <h3 id="adminModalTitle">Nuevo Usuario</h3>

     <label>Nombre completo:</label>
     <input id="adminNameInput" type="text" style="width:100%; padding:6px; margin-bottom:10px;">

     <label>Nivel:</label>
     <select id="adminLevelInput" style="width:100%; padding:6px; margin-bottom:10px;">
        <option value="P">Primaria</option>
        <option value="S">Secundaria</option>
     </select>

     <div style="text-align:right;">
        <button onclick="closeAdminModal()" style="
            background:#888; padding:6px 10px; color:white; border:none; border-radius:6px;
        ">Cancelar</button>

        <button onclick="saveAdminUser()" style="
            background:#38A3A5; padding:6px 10px; color:white; border:none; border-radius:6px;
        ">Guardar</button>
     </div>
  </div>
</div>

</body>
</html>
